<div class="user-container">
  <!-- Immagine di copertina full-width -->
  <div class="user-banner">
    <img class="banner-image" src="https://wallpapers.com/images/hd/banner-background-jcd538z62euhfpkx.jpg"
         alt="Cover Image">
  </div>

  <!-- Sezione profilo utente -->
  <div class="user-profile">
    <img class="user-avatar" [src]="avatar" alt="{{ user?.firstName }}">
    <h1 class="user-name">{{ user?.firstName }}</h1>
    <p class="user-role">{{ user?.role }}</p>
  </div>

  <!-- Menu di navigazione -->
  <div class="user-menu">
    <button [class.active]="selectedTab === 'bookedEvents'" (click)="setTab('bookedEvents')">Eventi Prenotati</button>
    <button [class.active]="selectedTab === 'pastEvents'" (click)="setTab('pastEvents')">Eventi Passati</button>
    <button [class.active]="selectedTab === 'myTickets'" (click)="setTab('myTickets')">I Miei Tickets</button>
    <button [class.active]="selectedTab === 'settings'" (click)="setTab('settings')">Impostazioni</button>
  </div>

  <!-- Riga divisoria -->
  <div class="divider"></div>

  <!-- Contenuto dinamico -->
  <div class="user-content">

    <!-- Eventi Prenotati -->
    <div *ngIf="selectedTab === 'bookedEvents'">
      <h2>Eventi Prenotati</h2>
      <div class="events-list2">
        <div class="event-card" *ngFor="let event of user?.userDetails?.bookedEvents">
          <div class="event-image">
            <img [src]="image" alt="{{ event.title }}">
          </div>
          <div class="event-info">
            <h2>{{ event.title }}</h2>
            <p><strong>📅 Data:</strong> {{ event.startDate | date: 'dd/MM/yyyy HH:mm' }}</p>
            <p><strong>📍 Luogo:</strong> {{ event.place }}</p>
            <p class="description">{{ event.description }}</p>
            <button class="revoke-button" (click)="openRevokeEventModal(event)">✖️ Annulla iscrizione</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Eventi Passati -->
    <div *ngIf="selectedTab === 'pastEvents'">
      <h2>Eventi Passati</h2>
      <div class="events-list">
        <div class="event-card" *ngFor="let event of user?.userDetails?.archivedEvents">
          <div class="event-image">
            <img [src]="image" alt="{{ event.title }}">
          </div>
          <div class="event-info">
            <h2>{{ event.title }}</h2>
            <p><strong>📅 Data:</strong> {{ event.startDate | date: 'dd/MM/yyyy HH:mm' }}</p>
            <p><strong>📍 Luogo:</strong> {{ event.place }}</p>
            <p class="description">{{ event.description }}</p>
          </div>
        </div>
      </div>
    </div>

    <!-- I Miei Tickets -->
    <div *ngIf="selectedTab === 'myTickets'">
      <h2>I Miei Ticket</h2>
      <div class="events-list">
        <div class="event-card2" *ngFor="let eventTicket of user?.userDetails?.bookedEvents">
          <div class="event-image">
            <img [src]="image" alt="{{ eventTicket.title }}">
          </div>
          <div class="event-info">
            <h2>{{ eventTicket.title }}</h2>
            <p><strong>📅 Data:</strong> {{ eventTicket.startDate | date: 'dd/MM/yyyy HH:mm' }}</p>
            <p><strong>📍 Luogo:</strong> {{ eventTicket.place }}</p>
            <p class="description">{{ eventTicket.description }}</p>
            <button class="download-button" (click)="openConfirmTicketModal(eventTicket)">🎟 Vai all'attivazione</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Impostazioni -->
    <div *ngIf="selectedTab === 'settings'">
      <h2>Impostazioni</h2>
      <!-- Contenuto delle impostazioni -->
    </div>
  </div>
</div>

<!-- Modale Conferma Ticket -->
<div class="modal" *ngIf="isConfirmTicketModalOpen">
  <div class="modal-content">
    <span class="close" (click)="closeModal()">&times;</span>
    <h3>Attiva il tuo ticket</h3>
    <p>Premi il pulsante qui sotto per attivare il tuo ticket.</p>
    <button class="confirm-button" (click)="activateTicket()">Attiva Ticket</button>
  </div>
</div>

<!-- Modale Annulla Iscrizione -->
<div class="modal" *ngIf="isRevokeEventModalOpen">
  <div class="modal-content">
    <span class="close" (click)="closeModal()">&times;</span>
    <h3>Sei sicuro di voler annullare l'iscrizione?</h3>
    <p>Premi il pulsante qui sotto per annullare l'iscrizione all'evento.</p>
    <button class="revoke-button" (click)="revokeEvent()">Annulla Iscrizione</button>
  </div>
</div>
